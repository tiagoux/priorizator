"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[647],{2647:function(e,s,a){a.r(s),a.d(s,{default:function(){return ea}});var t=a(5893),i=a(4293),l=a(7294),r=a(6501),n=a(4053),o=a(607),c=a(9560),d=a(2701),m=a(5010),x=a(5077),u=a(7369),p=a(5162),h=a(4933),g=a(2227),b=a(4622),j=a(704),f=a(9525);function y(e){let{raci:s}=e;if(!s||0===s.length)return null;let a=s.filter(e=>"responsible"===e.role);return 0===a.length?null:(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:a.map(e=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-indigo-50 text-indigo-700 truncate max-w-[200px]",children:[(0,t.jsx)(f.Z,{size:12}),e.team]},e.team))})}let v={not_prioritized:"bg-gray-100 text-gray-700",prioritized:"bg-blue-100 text-blue-700",in_progress:"bg-yellow-100 text-yellow-700",done:"bg-green-100 text-green-700",in_production:"bg-purple-100 text-purple-700"},N={not_prioritized:"N\xe3o Priorizado",prioritized:"Priorizado",in_progress:"Em andamento",done:"Validando",in_production:"Finalizado"};function w(){var e;let[s,a]=(0,l.useState)([]),[f,w]=(0,l.useState)([]),[_,k]=(0,l.useState)({}),[E,C]=(0,l.useState)("projects"),z=(0,i.s0)(),S=(0,n.useSession)(),Z=(null==S?void 0:null===(e=S.user)||void 0===e?void 0:e.email)==="tiago.rosa@ecommercebrasil.com.br";(0,l.useEffect)(()=>{A(),F()},[]);let A=async()=>{let{data:e}=await j.O.from("projects").select("*");if(e){a(e);let{data:s}=await j.O.from("features").select("*");if(s){let a={};e.forEach(e=>{let t=s.filter(s=>s.project_id===e.id);a[e.id]={total:t.length,inProgress:t.filter(e=>"in_progress"===e.status).length,completed:t.filter(e=>["done","in_production"].includes(e.status)).length}}),k(a)}}},F=async()=>{let{data:e}=await j.O.from("features").select("\n        *,\n        project:projects(*),\n        votes(\n          id,\n          user_id,\n          user:users(raw_user_meta_data)\n        ),\n        creator:users(raw_user_meta_data)\n      ").order("votes_count",{ascending:!1});e&&w(e.map(e=>{var s,a;return{...e,creator:null===(s=e.creator)||void 0===s?void 0:s.raw_user_meta_data,voters:(null===(a=e.votes)||void 0===a?void 0:a.map(e=>{var s;return{user_metadata:(null===(s=e.user)||void 0===s?void 0:s.raw_user_meta_data)||{}}}))||[]}}))},P=async(e,s)=>{let{error:a}=await j.O.from("projects").update({is_weekly_priority:!s}).eq("id",e);a?r.Am.error("Erro ao atualizar prioridade"):(r.Am.success("Prioridade atualizada com sucesso"),A())},V=e=>{let{project:s,index:a}=e;return(0,t.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-shadow overflow-hidden group",children:(0,t.jsxs)("div",{className:"p-6 sm:p-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:s.name}),s.is_weekly_priority&&(0,t.jsx)(c.Z,{className:"h-5 w-5 text-yellow-500 fill-yellow-500"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[Z&&(0,t.jsx)(o.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e=>{e.stopPropagation(),P(s.id,!!s.is_weekly_priority)},className:"p-2 rounded-full transition-colors ".concat(s.is_weekly_priority?"bg-yellow-100 text-yellow-600 hover:bg-yellow-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:(0,t.jsx)(c.Z,{className:"h-5 w-5 ".concat(s.is_weekly_priority?"fill-yellow-500":"")})}),(0,t.jsx)(o.E.div,{whileHover:{x:5},className:"text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:()=>z("/project/".concat(s.id)),children:(0,t.jsx)(d.Z,{size:24})})]})]}),(0,t.jsxs)("p",{className:"text-gray-600 mb-6",children:["Veja e vote nas demandas propostas para ",s.name]}),_[s.id]&&(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t border-gray-100",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 text-gray-600 mb-1",children:[(0,t.jsx)(m.Z,{size:16}),(0,t.jsx)("span",{className:"text-sm",children:"Total"})]}),(0,t.jsx)("span",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:_[s.id].total})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 text-yellow-600 mb-1",children:[(0,t.jsx)(x.Z,{size:16}),(0,t.jsx)("span",{className:"text-sm",children:"Em Progresso"})]}),(0,t.jsx)("span",{className:"text-xl sm:text-2xl font-bold text-yellow-600",children:_[s.id].inProgress})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 text-green-600 mb-1",children:[(0,t.jsx)(u.Z,{size:16}),(0,t.jsx)("span",{className:"text-sm",children:"Conclu\xeddas"})]}),(0,t.jsx)("span",{className:"text-xl sm:text-2xl font-bold text-green-600",children:_[s.id].completed})]})]})]})})},D=s.filter(e=>e.is_weekly_priority),O=s.filter(e=>!e.is_weekly_priority);return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8 sm:py-12",children:[(0,t.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12 sm:mb-16",children:[(0,t.jsx)(o.E.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:20},className:"flex justify-center mb-6",children:(0,t.jsx)(p.Z,{className:"h-12 sm:h-16 w-12 sm:w-16 text-blue-600"})}),(0,t.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:"Sistema de prioriza\xe7\xe3o de demandas"}),(0,t.jsx)("p",{className:"text-lg sm:text-xl text-gray-600",children:"Escolha um projeto para ver, votar e criar demandas."})]}),(0,t.jsxs)("div",{className:"flex justify-center gap-4 mb-8",children:[(0,t.jsx)("button",{onClick:()=>C("projects"),className:"px-4 py-2 rounded-md transition-colors ".concat("projects"===E?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Ver Projetos"}),(0,t.jsx)("button",{onClick:()=>C("ideas"),className:"px-4 py-2 rounded-md transition-colors ".concat("ideas"===E?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Ver Todas as Ideias"})]}),"projects"===E?(0,t.jsxs)(t.Fragment,{children:[D.length>0&&(0,t.jsxs)("div",{className:"mb-12",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,t.jsx)(c.Z,{className:"h-6 w-6 text-yellow-500 fill-yellow-500"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Prioridades da Semana"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8",children:D.map((e,s)=>(0,t.jsx)(V,{project:e,index:s},e.id))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Todos os Projetos"}),(0,t.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8",children:O.map((e,s)=>(0,t.jsx)(V,{project:e,index:s},e.id))})]})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map((e,s)=>{var a,i;return(0,t.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},onClick:()=>z("/project/".concat(e.project_id)),className:"bg-white rounded-lg shadow-lg hover:shadow-xl transition-all cursor-pointer p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-2",children:[(0,t.jsx)(h.Z,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[null===(a=e.creator)||void 0===a?void 0:a.first_name," ",null===(i=e.creator)||void 0===i?void 0:i.last_name]})]}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:e.title}),e.project&&(0,t.jsx)("div",{className:"mb-2",children:(0,t.jsx)("span",{className:"text-sm font-medium text-blue-600",children:e.project.name})}),(0,t.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-2",children:e.description}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-sm ".concat(v[e.status]),children:N[e.status]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-gray-500",children:[(0,t.jsx)(g.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:e.votes_count})]}),e.deadline&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-gray-500",children:[(0,t.jsx)(b.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-sm",children:new Date(e.deadline).toLocaleDateString()})]})]}),(0,t.jsx)(y,{raci:e.raci})]},e.id)})})]})})}var _=a(3114),k=a(3125),E=a(6249),C=a(2981),z=a(8505),S=a(7057),Z=a(9483),A=a(1012),F=a(1352),P=a(2448),V=a(3718);let D=["Comunica\xe7\xe3o & Marketing","Produtos Digitais & Tecnologia","Gest\xe3o F\xf3rum","Ops Eventos","Montagem eventos","Financeiro","RH","CS","Curadoria"];function O(e){let{value:s,onChange:a}=e,i=(e,t)=>{let i=s.filter(s=>s.team!==e);t&&i.push({team:e,role:t}),a(i)},l=e=>{var a;return null===(a=s.find(s=>s.team===e))||void 0===a?void 0:a.role};return(0,t.jsx)("div",{className:"overflow-x-auto -mx-4 sm:mx-0",children:(0,t.jsx)("div",{className:"inline-block min-w-full align-middle",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Time"}),(0,t.jsxs)("th",{className:"px-3 sm:px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:["R",(0,t.jsx)("span",{className:"block text-[10px] font-normal normal-case",children:"Respons\xe1vel"})]}),(0,t.jsxs)("th",{className:"px-3 sm:px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:["A",(0,t.jsx)("span",{className:"block text-[10px] font-normal normal-case",children:"Aprovador"})]}),(0,t.jsxs)("th",{className:"px-3 sm:px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:["C",(0,t.jsx)("span",{className:"block text-[10px] font-normal normal-case",children:"Consultado"})]}),(0,t.jsxs)("th",{className:"px-3 sm:px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:["I",(0,t.jsx)("span",{className:"block text-[10px] font-normal normal-case",children:"Informado"})]})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-3 sm:px-6 py-4 text-sm font-medium text-gray-900 whitespace-nowrap",children:e}),["responsible","accountable","consulted","informed"].map(s=>(0,t.jsx)("td",{className:"px-3 sm:px-6 py-4 text-center",children:(0,t.jsx)("input",{type:"radio",name:"raci-".concat(e),checked:l(e)===s,onChange:()=>i(e,s),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 cursor-pointer"})},s))]},e))})]})})})}var T=a(9283);function q(e){let{onAuthSuccess:s}=e,[a,i]=(0,l.useState)(""),[n,c]=(0,l.useState)(!1),d=e=>e.endsWith("@ecommercebrasil.com.br")||"kicozaninetti@gmail.com"===e,m=async e=>{if(e.preventDefault(),c(!0),!d(a)){r.Am.error("Apenas e-mails @ecommercebrasil.com.br s\xe3o permitidos"),c(!1);return}try{let{error:e}=await j.O.auth.signInWithOtp({email:a,options:{emailRedirectTo:window.location.origin}});if(e)throw e;r.Am.success("Link de acesso enviado para seu e-mail!"),s()}catch(s){let e=s instanceof Error?s.message:"Um erro ocorreu";r.Am.error(e)}finally{c(!1)}};return(0,t.jsxs)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[(0,t.jsx)(o.E.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:20},className:"flex justify-center",children:(0,t.jsx)(T.Z,{className:"h-12 w-12 text-blue-600"})}),(0,t.jsx)(o.E.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Entre na sua conta"}),(0,t.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Apenas para membros @ecommercebrasil.com.br"})]}),(0,t.jsx)(o.E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,t.jsxs)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[(0,t.jsxs)("form",{className:"space-y-6",onSubmit:m,method:"post",autoComplete:"on",children:[(0,t.jsxs)(o.E.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.6},children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"E-mail"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a,onChange:e=>i(e.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-all",placeholder:"seu@ecommercebrasil.com.br"})})]}),(0,t.jsx)(o.E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8},children:(0,t.jsx)(o.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:n,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:n?"Enviando...":"Enviar link de acesso"})})]}),(0,t.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},className:"mt-6 text-center text-sm text-gray-500",children:"Voc\xea receber\xe1 um e-mail com um link para acessar o sistema"})]})})]})}let H={not_prioritized:x.Z,prioritized:k.Z,in_progress:E.Z,done:u.Z,in_production:C.Z},M={not_prioritized:"N\xe3o Priorizado",prioritized:"Priorizado",in_progress:"Em andamento",done:"Validando",in_production:"Finalizado"},L={not_prioritized:"bg-gray-100 text-gray-700",prioritized:"bg-blue-100 text-blue-700",in_progress:"bg-yellow-100 text-yellow-700",done:"bg-green-100 text-green-700",in_production:"bg-purple-100 text-purple-700"};function R(){var e,s,a;let{projectId:c}=(0,i.UO)(),d=(0,i.s0)(),p=(0,n.useSession)(),[f,v]=(0,l.useState)([]),[N,w]=(0,l.useState)(null),[k,E]=(0,l.useState)(!1),[C,D]=(0,l.useState)(!1),[T,R]=(0,l.useState)(null),[U,I]=(0,l.useState)(!1),[W,B]=(0,l.useState)({title:"",description:"",status:"not_prioritized",deadline:"",raci:[]}),[G,K]=(0,l.useState)("votes"),[J,Q]=(0,l.useState)("grid"),[X,Y]=(0,l.useState)("all"),[$,ee]=(0,l.useState)({total:0,inProgress:0,completed:0,weeklyVotesLeft:3}),[es,ea]=(0,l.useState)({title:"",description:"",project_id:c||"",status:"not_prioritized",deadline:"",raci:[]}),et=(null==p?void 0:null===(e=p.user)||void 0===e?void 0:e.email)==="tiago.rosa@ecommercebrasil.com.br",ei=(0,l.useCallback)(async()=>{if(!p||!c)return;let{data:e}=await j.O.rpc("get_weekly_votes_count",{p_user_id:p.user.id,p_project_id:c});"number"==typeof e&&ee(s=>({...s,weeklyVotesLeft:Math.max(0,3-e)}))},[p,c]),el=(0,l.useCallback)(async()=>{if(!c)return;let{data:e}=await j.O.from("projects").select("*").eq("id",c).single();e&&w(e)},[c]),er=(0,l.useCallback)(async()=>{if(!c)return;let e=j.O.from("features").select("\n        *,\n        creator:created_by(first_name, last_name),\n        voters:votes(user_id, user_metadata:user_profiles!user_id(first_name, last_name))\n      ").eq("project_id",c);"all"!==X&&(e=e.eq("status",X)),e="votes"===G?e.order("votes_count",{ascending:!1}):e.order("created_at",{ascending:!1});let{data:s,error:a}=await e;if(a){console.error("Error fetching features:",a);return}s&&v(s)},[c,X,G]);(0,l.useEffect)(()=>{if(!c){d("/");return}ea(e=>({...e,project_id:c})),el(),er(),p&&ei()},[c,G,p,d,el,er,ei]),(0,l.useEffect)(()=>{T&&B({title:T.title,description:T.description||"",status:T.status,deadline:T.deadline||"",raci:T.raci||[]})},[T]),(0,l.useEffect)(()=>{ee(e=>({...e,total:f.length,inProgress:f.filter(e=>"in_progress"===e.status).length,completed:f.filter(e=>["done","in_production"].includes(e.status)).length}))},[f]);let en=async e=>{if(e.preventDefault(),p)try{let{error:e}=await j.O.from("features").insert([{...es,created_by:p.user.id,deadline:es.deadline||null}]);if(e)throw e;r.Am.success("Demanda criada com sucesso!"),E(!1),ea({title:"",description:"",project_id:c||"",status:"not_prioritized",deadline:"",raci:[]}),er()}catch(e){r.Am.error("Erro ao criar demanda"),console.error("Error creating feature:",e)}},eo=async e=>{if(e.preventDefault(),T&&p)try{let{error:e}=await j.O.from("features").update({...W,deadline:W.deadline||null}).eq("id",T.id);if(e)throw e;r.Am.success("Demanda atualizada com sucesso!"),R(null),er()}catch(e){r.Am.error("Erro ao atualizar demanda"),console.error("Error updating feature:",e)}},ec=async e=>{if(p)try{let{error:s}=await j.O.from("features").delete().eq("id",e);if(s)throw s;r.Am.success("Demanda exclu\xedda com sucesso!"),R(null),er()}catch(e){r.Am.error("Erro ao excluir demanda"),console.error("Error deleting feature:",e)}},ed=async e=>{if(!p){D(!0);return}if(0===$.weeklyVotesLeft){r.Am.error("Voc\xea atingiu o limite de votos desta semana");return}let{error:s}=await j.O.from("votes").insert([{feature_id:e,user_id:p.user.id}]);s?"23505"===s.code?r.Am.error("Voc\xea j\xe1 votou nesta demanda"):s.message.includes("new row violates row-level security")?r.Am.error("Voc\xea atingiu o limite de votos desta semana"):r.Am.error("Falha ao registrar voto"):(r.Am.success("Voto registrado com sucesso"),er(),ei())},em=e=>{var s;return(null===(s=e.user_metadata)||void 0===s?void 0:s.first_name)?"".concat(e.user_metadata.first_name," ").concat(e.user_metadata.last_name||"").trim():"Usu\xe1rio"},ex=e=>{let{feature:s}=e;return(0,t.jsxs)(o.E.div,{className:"group relative",whileHover:{scale:1.1},whileTap:{scale:.9},children:[(0,t.jsxs)(o.E.button,{onClick:e=>{e.stopPropagation(),ed(s.id)},className:"flex flex-col items-center gap-1",disabled:0===$.weeklyVotesLeft,children:[(0,t.jsx)(g.Z,{size:24,className:p&&$.weeklyVotesLeft>0?"text-blue-600":"text-gray-400"}),(0,t.jsx)("span",{className:"text-lg font-semibold",children:s.votes_count})]}),s.voters&&s.voters.length>0&&(0,t.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 invisible group-hover:visible z-10",children:[(0,t.jsxs)("div",{className:"bg-gray-900 text-white text-sm rounded-lg py-2 px-3 whitespace-nowrap",children:[(0,t.jsx)("div",{className:"font-semibold mb-1",children:"Votos:"}),s.voters.map((e,s)=>(0,t.jsx)("div",{children:em(e)},s))]}),(0,t.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-8 border-transparent border-t-gray-900"})]}),p&&0===$.weeklyVotesLeft&&(0,t.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 invisible group-hover:visible z-10",children:[(0,t.jsx)("div",{className:"bg-gray-900 text-white text-sm rounded-lg py-2 px-3 whitespace-nowrap",children:"Voc\xea atingiu o limite de votos desta semana"}),(0,t.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-8 border-transparent border-t-gray-900"})]})]})};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[N&&(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:N.name})}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 mb-2",children:[(0,t.jsx)(m.Z,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Total de Demandas"})]}),(0,t.jsx)("span",{className:"text-2xl font-bold",children:$.total})]}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-yellow-600 mb-2",children:[(0,t.jsx)(x.Z,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Em Progresso"})]}),(0,t.jsx)("span",{className:"text-2xl font-bold text-yellow-600",children:$.inProgress})]}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-600 mb-2",children:[(0,t.jsx)(u.Z,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Conclu\xeddas"})]}),(0,t.jsx)("span",{className:"text-2xl font-bold text-green-600",children:$.completed})]}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-blue-600 mb-2",children:[(0,t.jsx)(g.Z,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Votos Restantes"})]}),(0,t.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:$.weeklyVotesLeft})]})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 justify-between items-center mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("select",{value:G,onChange:e=>K(e.target.value),className:"rounded-md border-gray-300 shadow-sm px-3 py-1.5 text-sm",children:[(0,t.jsx)("option",{value:"votes",children:"Mais Votados"}),(0,t.jsx)("option",{value:"recent",children:"Mais Recentes"})]}),(0,t.jsxs)("select",{value:X,onChange:e=>Y(e.target.value),className:"rounded-md border-gray-300 shadow-sm px-3 py-1.5 text-sm",children:[(0,t.jsx)("option",{value:"all",children:"Todos os Status"}),Object.entries(M).map(e=>{let[s,a]=e;return(0,t.jsx)("option",{value:s,children:a},s)})]}),(0,t.jsxs)("div",{className:"flex border rounded-md",children:[(0,t.jsx)("button",{onClick:()=>Q("grid"),className:"p-2 ".concat("grid"===J?"bg-gray-100":""),children:(0,t.jsx)(z.Z,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:()=>Q("list"),className:"p-2 ".concat("list"===J?"bg-gray-100":""),children:(0,t.jsx)(S.Z,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:()=>Q("kanban"),className:"p-2 ".concat("kanban"===J?"bg-gray-100":""),children:(0,t.jsx)(Z.Z,{className:"w-5 h-5"})})]})]}),(0,t.jsxs)("button",{onClick:()=>p?E(!0):D(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[(0,t.jsx)(A.Z,{className:"w-5 h-5 mr-2"}),"Nova Feature"]})]}),"kanban"===J?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:Object.keys(M).map(e=>(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[l.createElement(H[e],{size:20}),(0,t.jsx)("h3",{className:"font-semibold",children:M[e]}),(0,t.jsx)("span",{className:"ml-auto bg-gray-200 px-2 py-0.5 rounded-full text-sm",children:f.filter(s=>s.status===e).length})]}),(0,t.jsx)("div",{className:"space-y-4",children:f.filter(s=>s.status===e).map(e=>(0,t.jsxs)(o.E.div,{layout:!0,onClick:()=>R(e),className:"bg-white rounded-lg border p-4 cursor-pointer hover:shadow-md transition-shadow",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsx)("h4",{className:"font-medium",children:e.title}),(0,t.jsx)(ex,{feature:e})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 mb-2",children:e.description}),(0,t.jsx)(y,{raci:e.raci})]},e.id))})]},e))}):(0,t.jsx)("div",{className:"grid"===J?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:f.map(e=>(0,t.jsxs)(o.E.div,{layout:!0,onClick:()=>R(e),className:"bg-white rounded-lg border p-4 hover:shadow-md transition-shadow cursor-pointer",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,t.jsxs)("div",{children:[e.creator&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-500 mb-1",children:[(0,t.jsx)(h.Z,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[e.creator.first_name," ",e.creator.last_name]})]}),(0,t.jsx)("h3",{className:"text-lg font-semibold",children:e.title})]}),(0,t.jsx)(ex,{feature:e})]}),(0,t.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-3",children:e.description}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-4",children:[(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-sm ".concat(L[e.status]),children:M[e.status]}),e.deadline&&(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,t.jsx)(b.Z,{className:"w-4 h-4 mr-1"}),new Date(e.deadline).toLocaleDateString()]})]}),(0,t.jsx)(y,{raci:e.raci})]},e.id))})]})]}),(0,t.jsxs)(_.M,{children:[C&&(0,t.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50",children:(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:(0,t.jsx)(q,{onAuthSuccess:()=>{D(!1),er()}})})})}),k&&(0,t.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 overflow-y-auto",children:(0,t.jsx)("div",{className:"min-h-screen px-4 text-center",children:(0,t.jsx)("div",{className:"inline-block align-middle my-8 w-full max-w-2xl",children:(0,t.jsxs)(o.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-lg shadow-xl w-full max-h-[80vh] flex flex-col",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Nova Feature"}),(0,t.jsx)("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-500",children:(0,t.jsx)(F.Z,{className:"w-5 h-5"})})]}),(0,t.jsx)("div",{className:"overflow-y-auto flex-1 p-6",children:(0,t.jsxs)("form",{onSubmit:en,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xedtulo"}),(0,t.jsx)("input",{type:"text",id:"title",value:es.title,onChange:e=>ea({...es,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Descri\xe7\xe3o"}),(0,t.jsx)("textarea",{id:"description",value:es.description,onChange:e=>ea({...es,description:e.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"deadline",className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Prevista"}),(0,t.jsx)("input",{type:"datetime-local",id:"deadline",value:es.deadline,onChange:e=>ea({...es,deadline:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Matriz RACI"}),(0,t.jsx)(O,{value:es.raci,onChange:e=>ea({...es,raci:e})})]})]})}),(0,t.jsxs)("div",{className:"border-t p-6 flex justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancelar"}),(0,t.jsx)("button",{onClick:en,className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700",children:"Criar Feature"})]})]})})})}),T&&(0,t.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 overflow-y-auto",children:(0,t.jsx)("div",{className:"min-h-screen px-4 text-center",children:(0,t.jsx)("div",{className:"inline-block align-middle my-8 w-full max-w-2xl",children:(0,t.jsxs)(o.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-lg shadow-xl w-full max-h-[80vh] flex flex-col",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:U?"Editar Feature":"Detalhes da Feature"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(null==p?void 0:null===(s=p.user)||void 0===s?void 0:s.id)===T.created_by&&!U&&(0,t.jsx)("button",{onClick:()=>I(!0),className:"p-2 text-gray-400 hover:text-gray-500",children:(0,t.jsx)(P.Z,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:()=>{R(null),I(!1)},className:"p-2 text-gray-400 hover:text-gray-500",children:(0,t.jsx)(F.Z,{className:"w-5 h-5"})})]})]}),(0,t.jsx)("div",{className:"overflow-y-auto flex-1 p-6",children:U?(0,t.jsxs)("form",{onSubmit:eo,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"edit-title",className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xedtulo"}),(0,t.jsx)("input",{type:"text",id:"edit-title",value:W.title,onChange:e=>B({...W,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"edit-description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Descri\xe7\xe3o"}),(0,t.jsx)("textarea",{id:"edit-description",value:W.description,onChange:e=>B({...W,description:e.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]}),et&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"edit-status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,t.jsx)("select",{id:"edit-status",value:W.status,onChange:e=>B({...W,status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:Object.entries(M).map(e=>{let[s,a]=e;return(0,t.jsx)("option",{value:s,children:a},s)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"edit-deadline",className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Prevista"}),(0,t.jsx)("input",{type:"datetime-local",id:"edit-deadline",value:W.deadline,onChange:e=>B({...W,deadline:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Matriz RACI"}),(0,t.jsx)(O,{value:W.raci,onChange:e=>B({...W,raci:e})})]})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:T.title}),(0,t.jsx)("p",{className:"text-gray-600 whitespace-pre-wrap",children:T.description})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-sm ".concat(L[T.status]),children:M[T.status]}),T.deadline&&(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,t.jsx)(b.Z,{className:"w-4 h-4 mr-1"}),new Date(T.deadline).toLocaleDateString()]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Responsabilidades"}),(0,t.jsx)(O,{value:T.raci||[],onChange:()=>{}})]}),T.voters&&T.voters.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"font-medium text-gray-900 mb-2",children:["Votos (",T.votes_count,")"]}),(0,t.jsx)("div",{className:"space-y-1",children:T.voters.map((e,s)=>(0,t.jsx)("div",{className:"text-sm text-gray-600",children:em(e)},s))})]})]})}),(0,t.jsxs)("div",{className:"border-t p-6 flex justify-between",children:[(0,t.jsx)("div",{children:(null==p?void 0:null===(a=p.user)||void 0===a?void 0:a.id)===T.created_by&&"not_prioritized"===T.status&&(0,t.jsxs)("button",{onClick:()=>ec(T.id),className:"flex items-center px-4 py-2 text-red-600 hover:text-red-700",children:[(0,t.jsx)(V.Z,{className:"w-4 h-4 mr-2"}),"Excluir"]})}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{R(null),I(!1)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:U?"Cancelar":"Fechar"}),U&&(0,t.jsx)("button",{onClick:eo,className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700",children:"Salvar Altera\xe7\xf5es"})]})]})]})})})})]})]})}var U=a(3696);function I(){let e=(0,n.useSession)(),s=(0,i.s0)(),[a,c]=(0,l.useState)(!1),[d,m]=(0,l.useState)({first_name:"",last_name:""}),x=(0,l.useCallback)(async()=>{let{data:{user:e}}=await j.O.auth.getUser();(null==e?void 0:e.user_metadata)&&m({first_name:e.user_metadata.first_name||"",last_name:e.user_metadata.last_name||""})},[]);(0,l.useEffect)(()=>{if(!e){s("/");return}x()},[e,s,x]);let u=async e=>{e.preventDefault(),c(!0);try{let{error:e}=await j.O.auth.updateUser({data:{first_name:d.first_name,last_name:d.last_name}});if(e)throw e;r.Am.success("Perfil atualizado com sucesso!")}catch(s){let e=s instanceof Error?s.message:"Erro ao atualizar perfil";r.Am.error(e)}finally{c(!1)}};return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsx)("div",{className:"max-w-md mx-auto",children:(0,t.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-lg overflow-hidden",children:(0,t.jsxs)("div",{className:"px-6 py-8",children:[(0,t.jsx)("div",{className:"flex items-center justify-center mb-8",children:(0,t.jsx)(h.Z,{className:"h-12 w-12 text-blue-600"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Meu Perfil"}),(0,t.jsxs)("form",{onSubmit:u,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-700",children:"Nome"}),(0,t.jsx)("input",{type:"text",id:"first_name",required:!0,value:d.first_name,onChange:e=>m({...d,first_name:e.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700",children:"Sobrenome"}),(0,t.jsx)("input",{type:"text",id:"last_name",required:!0,value:d.last_name,onChange:e=>m({...d,last_name:e.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,t.jsxs)(o.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:a,className:"w-full flex items-center justify-center gap-2 px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)(U.Z,{size:18}),a?"Salvando...":"Salvar Altera\xe7\xf5es"]})]})]})})})})})}var W=a(9689);function B(){return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white py-12",children:(0,t.jsxs)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Como Funciona"}),(0,t.jsx)("p",{className:"text-xl text-gray-600",children:"Entenda como funciona nosso sistema de vota\xe7\xe3o de demandas"})]}),(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)(o.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)(W.Z,{className:"h-6 w-6 text-blue-600"}),(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Sistema de Vota\xe7\xe3o"})]}),(0,t.jsxs)("div",{className:"space-y-3 text-gray-600",children:[(0,t.jsx)("p",{children:"• Cada usu\xe1rio tem direito a 3 votos por semana em cada projeto"}),(0,t.jsx)("p",{children:"• Os votos s\xe3o renovados automaticamente toda semana"}),(0,t.jsx)("p",{children:"• Votos n\xe3o utilizados n\xe3o acumulam para a pr\xf3xima semana"}),(0,t.jsx)("p",{children:"• Voc\xea pode ver seus votos restantes no painel do projeto"})]})]}),(0,t.jsxs)(o.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)(m.Z,{className:"h-6 w-6 text-blue-600"}),(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Status das Demandas"})]}),(0,t.jsxs)("div",{className:"space-y-3 text-gray-600",children:[(0,t.jsx)("p",{children:"• N\xe3o Priorizado: Demanda registrada mas ainda n\xe3o avaliada"}),(0,t.jsx)("p",{children:"• Priorizado: Demanda aprovada e aguardando in\xedcio"}),(0,t.jsx)("p",{children:"• Em Progresso: Demanda em desenvolvimento"}),(0,t.jsx)("p",{children:"• Conclu\xeddo: Desenvolvimento finalizado"}),(0,t.jsx)("p",{children:"• Em Produ\xe7\xe3o: Demanda j\xe1 dispon\xedvel em produ\xe7\xe3o"})]})]}),(0,t.jsxs)(o.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)(x.Z,{className:"h-6 w-6 text-blue-600"}),(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Ciclo de Vida"})]}),(0,t.jsxs)("div",{className:"space-y-3 text-gray-600",children:[(0,t.jsx)("p",{children:"1. Usu\xe1rios registram novas demandas nos projetos"}),(0,t.jsx)("p",{children:"2. A comunidade vota nas demandas mais importantes"}),(0,t.jsx)("p",{children:"3. Demandas mais votadas s\xe3o priorizadas para desenvolvimento"}),(0,t.jsx)("p",{children:"4. O status \xe9 atualizado conforme o progresso"}),(0,t.jsx)("p",{children:"5. Todos podem acompanhar o andamento em tempo real"})]})]})]})]})})}var G=a(5977);function K(){let[e,s]=(0,l.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 via-white to-blue-50",children:[(0,t.jsx)("div",{className:"relative overflow-hidden",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,t.jsx)("div",{className:"relative z-10 pb-8 sm:pb-16 md:pb-20 lg:w-full lg:pb-28 xl:pb-32",children:(0,t.jsx)("main",{className:"mt-10 mx-auto max-w-7xl px-4 sm:mt-12 sm:px-6 lg:mt-16 lg:px-8 xl:mt-28",children:(0,t.jsxs)("div",{className:"text-center lg:text-left",children:[(0,t.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,t.jsxs)("h1",{className:"text-4xl tracking-tight font-extrabold text-gray-900 sm:text-5xl md:text-6xl",children:[(0,t.jsx)("span",{className:"block",children:"Sistema de Vota\xe7\xe3o"}),(0,t.jsx)("span",{className:"block text-blue-600",children:"de Demandas"})]}),(0,t.jsx)("p",{className:"mt-3 text-base text-gray-500 sm:mt-5 sm:text-lg sm:max-w-xl sm:mx-auto lg:mx-0 md:mt-5 md:text-xl",children:"Participe ativamente do processo de prioriza\xe7\xe3o de demandas. Vote nas funcionalidades mais importantes e acompanhe o progresso dos projetos."})]}),(0,t.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},className:"mt-5 sm:mt-8 sm:flex sm:justify-center lg:justify-start",children:(0,t.jsx)("div",{className:"rounded-md shadow",children:(0,t.jsxs)("button",{onClick:()=>s(!0),className:"w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 md:py-4 md:text-lg md:px-10",children:["Come\xe7ar",(0,t.jsx)(d.Z,{className:"ml-2 h-5 w-5"})]})})})]})})})})}),(0,t.jsx)("div",{className:"py-12 bg-white",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},className:"text-center mb-16",children:[(0,t.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900 sm:text-4xl",children:"Como Funciona"}),(0,t.jsx)("p",{className:"mt-4 text-xl text-gray-500",children:"Um processo simples e transparente para priorizar demandas"})]}),(0,t.jsx)("div",{className:"mt-10",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-10 sm:grid-cols-2 lg:grid-cols-3",children:[(0,t.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},className:"flex flex-col items-center text-center",children:[(0,t.jsx)("div",{className:"flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 text-blue-600 mb-4",children:(0,t.jsx)(W.Z,{className:"h-8 w-8"})}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Vote nas Demandas"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Cada usu\xe1rio tem 3 votos por semana para distribuir entre as demandas que considerar mais importantes."})]}),(0,t.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7,duration:.5},className:"flex flex-col items-center text-center",children:[(0,t.jsx)("div",{className:"flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 text-blue-600 mb-4",children:(0,t.jsx)(f.Z,{className:"h-8 w-8"})}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Colabora\xe7\xe3o em Equipe"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Acompanhe as responsabilidades de cada time atrav\xe9s da matriz RACI e mantenha todos alinhados."})]}),(0,t.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},className:"flex flex-col items-center text-center",children:[(0,t.jsx)("div",{className:"flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 text-blue-600 mb-4",children:(0,t.jsx)(u.Z,{className:"h-8 w-8"})}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Acompanhe o Progresso"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Visualize o status de cada demanda, desde sua cria\xe7\xe3o at\xe9 a implementa\xe7\xe3o em produ\xe7\xe3o."})]})]})})]})}),(0,t.jsx)("div",{className:"bg-blue-600",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:py-16 lg:px-8 lg:flex lg:items-center lg:justify-between",children:[(0,t.jsx)(o.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:1,duration:.5},children:(0,t.jsxs)("h2",{className:"text-3xl font-extrabold tracking-tight text-white sm:text-4xl",children:[(0,t.jsx)("span",{className:"block",children:"Pronto para come\xe7ar?"}),(0,t.jsx)("span",{className:"block text-blue-200",children:"Fa\xe7a login e participe do processo."})]})}),(0,t.jsx)(o.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:1.2,duration:.5},className:"mt-8 flex lg:mt-0 lg:flex-shrink-0",children:(0,t.jsx)("div",{className:"inline-flex rounded-md shadow",children:(0,t.jsxs)("button",{onClick:()=>s(!0),className:"inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-blue-600 bg-white hover:bg-blue-50",children:[(0,t.jsx)(G.Z,{className:"h-5 w-5 mr-2"}),"Acessar Sistema"]})})})]})})]}),(0,t.jsx)(_.M,{children:e&&(0,t.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:(0,t.jsx)(o.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-lg shadow-xl max-w-md w-full m-4",children:(0,t.jsx)(q,{onAuthSuccess:()=>{s(!1),window.location.href="/"}})})})})]})}var J=a(1173),Q=a(8051),X=a(7232);function Y(){let e=(0,i.s0)(),{projectId:s}=(0,i.UO)(),[a,r]=(0,l.useState)(null),[c,d]=(0,l.useState)(!1),[m,x]=(0,l.useState)(!1),u=(0,n.useSession)(),g=(0,n.useSupabaseClient)(),b=(0,l.useCallback)(async()=>{if(!s)return;let{data:e}=await g.from("projects").select("*").eq("id",s).single();e&&r(e)},[s,g]);(0,l.useEffect)(()=>{u&&s&&b()},[s,u,b]);let j=async()=>{await g.auth.signOut(),e("/")};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("header",{className:"bg-gradient-to-b from-blue-50 to-white border-b border-gray-200 sticky top-0 z-40",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between h-14 sm:h-16",children:[(0,t.jsxs)(o.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>e("/"),className:"flex items-center gap-2 text-gray-900 hover:text-blue-600 transition-colors",children:[(0,t.jsx)(p.Z,{className:"h-5 sm:h-6 w-5 sm:w-6"}),(0,t.jsx)("span",{className:"text-base sm:text-lg font-semibold truncate max-w-[150px] sm:max-w-[200px]",children:a?a.name:"ECBR Prioriza\xe7\xe3o"})]}),(0,t.jsxs)("div",{className:"hidden md:flex items-center gap-4",children:[(0,t.jsxs)(o.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>e("/how-it-works"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[(0,t.jsx)(J.Z,{size:16}),(0,t.jsx)("span",{children:"Como Funciona"})]}),u?(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(o.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>e("/profile"),className:"flex items-center gap-2 text-gray-700 hover:text-gray-900 transition-colors text-sm",children:[(0,t.jsx)(h.Z,{size:16}),(0,t.jsx)("span",{className:"hidden lg:inline",children:u.user.email})]}),(0,t.jsxs)(o.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:j,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-gray-700 hover:text-gray-900 transition-colors",children:[(0,t.jsx)(Q.Z,{size:16}),(0,t.jsx)("span",{children:"Sair"})]})]}):(0,t.jsxs)(o.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>d(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 transition-colors",children:[(0,t.jsx)(T.Z,{size:16}),"Entrar"]})]}),(0,t.jsx)("button",{onClick:()=>x(!m),className:"md:hidden p-2 text-gray-600 hover:text-gray-900 transition-colors",children:m?(0,t.jsx)(F.Z,{size:20}):(0,t.jsx)(X.Z,{size:20})})]}),(0,t.jsx)(_.M,{children:m&&(0,t.jsxs)(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden py-4 space-y-4",children:[(0,t.jsxs)(o.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{e("/how-it-works"),x(!1)},className:"flex items-center gap-2 w-full px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[(0,t.jsx)(J.Z,{size:16}),(0,t.jsx)("span",{children:"Como Funciona"})]}),u?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{e("/profile"),x(!1)},className:"flex items-center gap-2 w-full px-4 py-2 text-gray-700 hover:text-gray-900 transition-colors text-sm",children:[(0,t.jsx)(h.Z,{size:16}),(0,t.jsx)("span",{children:u.user.email})]}),(0,t.jsxs)(o.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{j(),x(!1)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 transition-colors",children:[(0,t.jsx)(Q.Z,{size:16}),"Sair"]})]}):(0,t.jsxs)(o.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{d(!0),x(!1)},className:"flex items-center gap-2 w-full px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 transition-colors",children:[(0,t.jsx)(T.Z,{size:16}),"Entrar"]})]})})]})}),(0,t.jsx)(_.M,{children:c&&(0,t.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50",children:(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:(0,t.jsx)(q,{onAuthSuccess:()=>{d(!1)}})})})})})]})}function $(e){let{onComplete:s}=e,[a,i]=(0,l.useState)(""),[n,c]=(0,l.useState)(""),[d,m]=(0,l.useState)(!1),x=async e=>{e.preventDefault(),m(!0);try{let e=await j.O.auth.updateUser({data:{first_name:a,last_name:n}});if(e.error)throw e.error;r.Am.success("Perfil atualizado com sucesso!"),s()}catch(e){r.Am.error("Erro ao atualizar perfil")}finally{m(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,t.jsx)(o.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("div",{className:"flex justify-center mb-6",children:(0,t.jsx)(h.Z,{className:"h-12 w-12 text-blue-600"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-6",children:"Bem-vindo! Como podemos te chamar?"}),(0,t.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),(0,t.jsx)("input",{type:"text",id:"firstName",value:a,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Sobrenome"}),(0,t.jsx)("input",{type:"text",id:"lastName",value:n,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,t.jsx)(o.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:d,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:d?"Salvando...":"Continuar"})]})]})})})}function ee(e){let{children:s}=e;return(0,n.useSession)()?(0,t.jsx)(t.Fragment,{children:s}):(0,t.jsx)(i.Fg,{to:"/",replace:!0})}var es=function(){let e=(0,n.useSession)(),s=(0,n.useSupabaseClient)(),[a,o]=(0,l.useState)(!1),c=(0,l.useCallback)(async()=>{var a;if(!e)return;let{data:{user:t}}=await s.auth.getUser();(null==t?void 0:null===(a=t.user_metadata)||void 0===a?void 0:a.first_name)||o(!0)},[e,s]);return(0,l.useEffect)(()=>{e&&c()},[e,c]),(0,t.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,t.jsx)(r.x7,{position:"top-right"}),e&&(0,t.jsx)(Y,{}),a&&(0,t.jsx)($,{onComplete:()=>o(!1)}),(0,t.jsx)("main",{className:"flex-1",children:(0,t.jsxs)(i.Z5,{children:[(0,t.jsx)(i.AW,{path:"/",element:e?(0,t.jsx)(ee,{children:(0,t.jsx)(w,{})}):(0,t.jsx)(K,{})}),(0,t.jsx)(i.AW,{path:"/project/:projectId",element:(0,t.jsx)(ee,{children:(0,t.jsx)(R,{})})}),(0,t.jsx)(i.AW,{path:"/profile",element:(0,t.jsx)(ee,{children:(0,t.jsx)(I,{})})}),(0,t.jsx)(i.AW,{path:"/how-it-works",element:(0,t.jsx)(ee,{children:(0,t.jsx)(B,{})})}),(0,t.jsx)(i.AW,{path:"*",element:(0,t.jsx)(i.Fg,{to:"/",replace:!0})})]})})]})};function ea(){return(0,t.jsx)(i.VK,{children:(0,t.jsx)(es,{})})}}}]);