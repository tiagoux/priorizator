"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[784],{1784:function(e,s,a){let t;a.r(s),a.d(s,{default:function(){return el}});var i=a(5893),l=a(4293),r=a(7294),n=a(6501),o=a(4053),c=a(607),d=a(9560),m=a(2701),x=a(5010),u=a(5077),p=a(7369),h=a(5162),g=a(4933),b=a(2227),j=a(4622),f=a(8967);let y="https://seqlpahvvxvthwffhxfk.supabase.co",v="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNlcWxwYWh2dnh2dGh3ZmZoeGZrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ4MzQ4NzYsImV4cCI6MjA2MDQxMDg3Nn0.fAsr2HjBcAbMkPGqR_Ylaz4y8gKwfhWt7rGN_DiGn6E";y&&v?t=(0,f.eI)(y,v):(console.warn("Supabase credentials not configured. Using mock client."),t={auth:{getSession:()=>Promise.resolve({data:{session:null},error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}}),signInWithOAuth:()=>Promise.resolve({data:null,error:Error("Supabase not configured")}),signOut:()=>Promise.resolve({error:null})},from:()=>({select:()=>Promise.resolve({data:[],error:null}),insert:()=>Promise.resolve({data:null,error:Error("Supabase not configured")}),update:()=>Promise.resolve({data:null,error:Error("Supabase not configured")}),delete:()=>Promise.resolve({data:null,error:Error("Supabase not configured")})})});var N=a(9525);function w(e){let{raci:s}=e;if(!s||0===s.length)return null;let a=s.filter(e=>"responsible"===e.role);return 0===a.length?null:(0,i.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:a.map(e=>(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-indigo-50 text-indigo-700 truncate max-w-[200px]",children:[(0,i.jsx)(N.Z,{size:12}),e.team]},e.team))})}let _={not_prioritized:"bg-gray-100 text-gray-700",prioritized:"bg-blue-100 text-blue-700",in_progress:"bg-yellow-100 text-yellow-700",done:"bg-green-100 text-green-700",in_production:"bg-purple-100 text-purple-700"},k={not_prioritized:"N\xe3o Priorizado",prioritized:"Priorizado",in_progress:"Em andamento",done:"Validando",in_production:"Finalizado"};function E(){var e;let[s,a]=(0,r.useState)([]),[f,y]=(0,r.useState)([]),[v,N]=(0,r.useState)({}),[E,C]=(0,r.useState)("projects"),z=(0,l.s0)(),S=(0,o.useSession)(),Z=(null==S?void 0:null===(e=S.user)||void 0===e?void 0:e.email)==="tiago.rosa@ecommercebrasil.com.br";(0,r.useEffect)(()=>{A(),P()},[]);let A=async()=>{let{data:e}=await t.from("projects").select("*");if(e){a(e);let{data:s}=await t.from("features").select("*");if(s){let a={};e.forEach(e=>{let t=s.filter(s=>s.project_id===e.id);a[e.id]={total:t.length,inProgress:t.filter(e=>"in_progress"===e.status).length,completed:t.filter(e=>["done","in_production"].includes(e.status)).length}}),N(a)}}},P=async()=>{let{data:e}=await t.from("features").select("\n        *,\n        project:projects(*),\n        votes(\n          id,\n          user_id,\n          user:users(raw_user_meta_data)\n        ),\n        creator:users(raw_user_meta_data)\n      ").order("votes_count",{ascending:!1});e&&y(e.map(e=>{var s,a;return{...e,creator:null===(s=e.creator)||void 0===s?void 0:s.raw_user_meta_data,voters:(null===(a=e.votes)||void 0===a?void 0:a.map(e=>{var s;return{user_metadata:(null===(s=e.user)||void 0===s?void 0:s.raw_user_meta_data)||{}}}))||[]}}))},F=async(e,s)=>{let{error:a}=await t.from("projects").update({is_weekly_priority:!s}).eq("id",e);a?n.Am.error("Erro ao atualizar prioridade"):(n.Am.success("Prioridade atualizada com sucesso"),A())},D=e=>{let{project:s,index:a}=e;return(0,i.jsx)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-shadow overflow-hidden group",children:(0,i.jsxs)("div",{className:"p-6 sm:p-8",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:s.name}),s.is_weekly_priority&&(0,i.jsx)(d.Z,{className:"h-5 w-5 text-yellow-500 fill-yellow-500"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[Z&&(0,i.jsx)(c.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e=>{e.stopPropagation(),F(s.id,!!s.is_weekly_priority)},className:"p-2 rounded-full transition-colors ".concat(s.is_weekly_priority?"bg-yellow-100 text-yellow-600 hover:bg-yellow-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:(0,i.jsx)(d.Z,{className:"h-5 w-5 ".concat(s.is_weekly_priority?"fill-yellow-500":"")})}),(0,i.jsx)(c.E.div,{whileHover:{x:5},className:"text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:()=>z("/project/".concat(s.id)),children:(0,i.jsx)(m.Z,{size:24})})]})]}),(0,i.jsxs)("p",{className:"text-gray-600 mb-6",children:["Veja e vote nas demandas propostas para ",s.name]}),v[s.id]&&(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t border-gray-100",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1 text-gray-600 mb-1",children:[(0,i.jsx)(x.Z,{size:16}),(0,i.jsx)("span",{className:"text-sm",children:"Total"})]}),(0,i.jsx)("span",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:v[s.id].total})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1 text-yellow-600 mb-1",children:[(0,i.jsx)(u.Z,{size:16}),(0,i.jsx)("span",{className:"text-sm",children:"Em Progresso"})]}),(0,i.jsx)("span",{className:"text-xl sm:text-2xl font-bold text-yellow-600",children:v[s.id].inProgress})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1 text-green-600 mb-1",children:[(0,i.jsx)(p.Z,{size:16}),(0,i.jsx)("span",{className:"text-sm",children:"Conclu\xeddas"})]}),(0,i.jsx)("span",{className:"text-xl sm:text-2xl font-bold text-green-600",children:v[s.id].completed})]})]})]})})},V=s.filter(e=>e.is_weekly_priority),I=s.filter(e=>!e.is_weekly_priority);return(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8 sm:py-12",children:[(0,i.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12 sm:mb-16",children:[(0,i.jsx)(c.E.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:20},className:"flex justify-center mb-6",children:(0,i.jsx)(h.Z,{className:"h-12 sm:h-16 w-12 sm:w-16 text-blue-600"})}),(0,i.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:"Sistema de prioriza\xe7\xe3o de demandas"}),(0,i.jsx)("p",{className:"text-lg sm:text-xl text-gray-600",children:"Escolha um projeto para ver, votar e criar demandas."})]}),(0,i.jsxs)("div",{className:"flex justify-center gap-4 mb-8",children:[(0,i.jsx)("button",{onClick:()=>C("projects"),className:"px-4 py-2 rounded-md transition-colors ".concat("projects"===E?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Ver Projetos"}),(0,i.jsx)("button",{onClick:()=>C("ideas"),className:"px-4 py-2 rounded-md transition-colors ".concat("ideas"===E?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Ver Todas as Ideias"})]}),"projects"===E?(0,i.jsxs)(i.Fragment,{children:[V.length>0&&(0,i.jsxs)("div",{className:"mb-12",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,i.jsx)(d.Z,{className:"h-6 w-6 text-yellow-500 fill-yellow-500"}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Prioridades da Semana"})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8",children:V.map((e,s)=>(0,i.jsx)(D,{project:e,index:s},e.id))})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Todos os Projetos"}),(0,i.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8",children:I.map((e,s)=>(0,i.jsx)(D,{project:e,index:s},e.id))})]})]}):(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map((e,s)=>{var a,t;return(0,i.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},onClick:()=>z("/project/".concat(e.project_id)),className:"bg-white rounded-lg shadow-lg hover:shadow-xl transition-all cursor-pointer p-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-2",children:[(0,i.jsx)(g.Z,{className:"w-4 h-4"}),(0,i.jsxs)("span",{children:[null===(a=e.creator)||void 0===a?void 0:a.first_name," ",null===(t=e.creator)||void 0===t?void 0:t.last_name]})]}),(0,i.jsx)("h3",{className:"text-lg font-semibold mb-2",children:e.title}),e.project&&(0,i.jsx)("div",{className:"mb-2",children:(0,i.jsx)("span",{className:"text-sm font-medium text-blue-600",children:e.project.name})}),(0,i.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-2",children:e.description}),(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,i.jsx)("span",{className:"px-3 py-1 rounded-full text-sm ".concat(_[e.status]),children:k[e.status]}),(0,i.jsxs)("div",{className:"flex items-center gap-1 text-gray-500",children:[(0,i.jsx)(b.Z,{className:"w-4 h-4"}),(0,i.jsx)("span",{children:e.votes_count})]}),e.deadline&&(0,i.jsxs)("div",{className:"flex items-center gap-1 text-gray-500",children:[(0,i.jsx)(j.Z,{className:"w-4 h-4"}),(0,i.jsx)("span",{className:"text-sm",children:new Date(e.deadline).toLocaleDateString()})]})]}),(0,i.jsx)(w,{raci:e.raci})]},e.id)})})]})})}var C=a(3114),z=a(3125),S=a(6249),Z=a(2981),A=a(8505),P=a(7057),F=a(9483),D=a(1012),V=a(1352),I=a(2448),T=a(3718);let q=["Comunica\xe7\xe3o & Marketing","Produtos Digitais & Tecnologia","Gest\xe3o F\xf3rum","Ops Eventos","Montagem eventos","Financeiro","RH","CS","Curadoria"];function M(e){let{value:s,onChange:a}=e,t=(e,t)=>{let i=s.filter(s=>s.team!==e);t&&i.push({team:e,role:t}),a(i)},l=e=>{var a;return null===(a=s.find(s=>s.team===e))||void 0===a?void 0:a.role};return(0,i.jsx)("div",{className:"overflow-x-auto -mx-4 sm:mx-0",children:(0,i.jsx)("div",{className:"inline-block min-w-full align-middle",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Time"}),(0,i.jsxs)("th",{className:"px-3 sm:px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:["R",(0,i.jsx)("span",{className:"block text-[10px] font-normal normal-case",children:"Respons\xe1vel"})]}),(0,i.jsxs)("th",{className:"px-3 sm:px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:["A",(0,i.jsx)("span",{className:"block text-[10px] font-normal normal-case",children:"Aprovador"})]}),(0,i.jsxs)("th",{className:"px-3 sm:px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:["C",(0,i.jsx)("span",{className:"block text-[10px] font-normal normal-case",children:"Consultado"})]}),(0,i.jsxs)("th",{className:"px-3 sm:px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:["I",(0,i.jsx)("span",{className:"block text-[10px] font-normal normal-case",children:"Informado"})]})]})}),(0,i.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:q.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"px-3 sm:px-6 py-4 text-sm font-medium text-gray-900 whitespace-nowrap",children:e}),["responsible","accountable","consulted","informed"].map(s=>(0,i.jsx)("td",{className:"px-3 sm:px-6 py-4 text-center",children:(0,i.jsx)("input",{type:"radio",name:"raci-".concat(e),checked:l(e)===s,onChange:()=>t(e,s),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 cursor-pointer"})},s))]},e))})]})})})}var H=a(9283);function O(e){let{onAuthSuccess:s}=e,[a,l]=(0,r.useState)(""),[o,d]=(0,r.useState)(!1),m=e=>e.endsWith("@ecommercebrasil.com.br")||"kicozaninetti@gmail.com"===e,x=async e=>{if(e.preventDefault(),d(!0),!m(a)){n.Am.error("Apenas e-mails @ecommercebrasil.com.br s\xe3o permitidos"),d(!1);return}try{let{error:e}=await t.auth.signInWithOtp({email:a,options:{emailRedirectTo:window.location.origin}});if(e)throw e;n.Am.success("Link de acesso enviado para seu e-mail!"),s()}catch(s){let e=s instanceof Error?s.message:"Um erro ocorreu";n.Am.error(e)}finally{d(!1)}};return(0,i.jsxs)(c.E.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,i.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[(0,i.jsx)(c.E.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:20},className:"flex justify-center",children:(0,i.jsx)(H.Z,{className:"h-12 w-12 text-blue-600"})}),(0,i.jsx)(c.E.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Entre na sua conta"}),(0,i.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Apenas para membros @ecommercebrasil.com.br"})]}),(0,i.jsx)(c.E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,i.jsxs)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[(0,i.jsxs)("form",{className:"space-y-6",onSubmit:x,method:"post",autoComplete:"on",children:[(0,i.jsxs)(c.E.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.6},children:[(0,i.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"E-mail"}),(0,i.jsx)("div",{className:"mt-1",children:(0,i.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a,onChange:e=>l(e.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-all",placeholder:"seu@ecommercebrasil.com.br"})})]}),(0,i.jsx)(c.E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8},children:(0,i.jsx)(c.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:o,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:o?"Enviando...":"Enviar link de acesso"})})]}),(0,i.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},className:"mt-6 text-center text-sm text-gray-500",children:"Voc\xea receber\xe1 um e-mail com um link para acessar o sistema"})]})})]})}let R={not_prioritized:u.Z,prioritized:z.Z,in_progress:S.Z,done:p.Z,in_production:Z.Z},L={not_prioritized:"N\xe3o Priorizado",prioritized:"Priorizado",in_progress:"Em andamento",done:"Validando",in_production:"Finalizado"},U={not_prioritized:"bg-gray-100 text-gray-700",prioritized:"bg-blue-100 text-blue-700",in_progress:"bg-yellow-100 text-yellow-700",done:"bg-green-100 text-green-700",in_production:"bg-purple-100 text-purple-700"};function W(){var e,s,a;let{projectId:d}=(0,l.UO)(),m=(0,l.s0)(),h=(0,o.useSession)(),[f,y]=(0,r.useState)([]),[v,N]=(0,r.useState)(null),[_,k]=(0,r.useState)(!1),[E,z]=(0,r.useState)(!1),[S,Z]=(0,r.useState)(null),[q,H]=(0,r.useState)(!1),[W,G]=(0,r.useState)({title:"",description:"",status:"not_prioritized",deadline:"",raci:[]}),[J,Y]=(0,r.useState)("votes"),[B,Q]=(0,r.useState)("grid"),[X,K]=(0,r.useState)("all"),[$,ee]=(0,r.useState)({total:0,inProgress:0,completed:0,weeklyVotesLeft:3}),[es,ea]=(0,r.useState)({title:"",description:"",project_id:d||"",status:"not_prioritized",deadline:"",raci:[]}),et=(null==h?void 0:null===(e=h.user)||void 0===e?void 0:e.email)==="tiago.rosa@ecommercebrasil.com.br",ei=(0,r.useCallback)(async()=>{if(!h||!d)return;let{data:e}=await t.rpc("get_weekly_votes_count",{p_user_id:h.user.id,p_project_id:d});"number"==typeof e&&ee(s=>({...s,weeklyVotesLeft:Math.max(0,3-e)}))},[h,d]),el=(0,r.useCallback)(async()=>{if(!d)return;let{data:e}=await t.from("projects").select("*").eq("id",d).single();e&&N(e)},[d]),er=(0,r.useCallback)(async()=>{if(!d)return;let e=t.from("features").select("\n        *,\n        creator:created_by(first_name, last_name),\n        voters:votes(user_id, user_metadata:user_profiles!user_id(first_name, last_name))\n      ").eq("project_id",d);"all"!==X&&(e=e.eq("status",X)),e="votes"===J?e.order("votes_count",{ascending:!1}):e.order("created_at",{ascending:!1});let{data:s,error:a}=await e;if(a){console.error("Error fetching features:",a);return}s&&y(s)},[d,X,J]);(0,r.useEffect)(()=>{if(!d){m("/");return}ea(e=>({...e,project_id:d})),el(),er(),h&&ei()},[d,J,h,m,el,er,ei]),(0,r.useEffect)(()=>{S&&G({title:S.title,description:S.description||"",status:S.status,deadline:S.deadline||"",raci:S.raci||[]})},[S]),(0,r.useEffect)(()=>{ee(e=>({...e,total:f.length,inProgress:f.filter(e=>"in_progress"===e.status).length,completed:f.filter(e=>["done","in_production"].includes(e.status)).length}))},[f]);let en=async e=>{if(e.preventDefault(),h)try{let{error:e}=await t.from("features").insert([{...es,created_by:h.user.id,deadline:es.deadline||null}]);if(e)throw e;n.Am.success("Demanda criada com sucesso!"),k(!1),ea({title:"",description:"",project_id:d||"",status:"not_prioritized",deadline:"",raci:[]}),er()}catch(e){n.Am.error("Erro ao criar demanda"),console.error("Error creating feature:",e)}},eo=async e=>{if(e.preventDefault(),S&&h)try{let{error:e}=await t.from("features").update({...W,deadline:W.deadline||null}).eq("id",S.id);if(e)throw e;n.Am.success("Demanda atualizada com sucesso!"),Z(null),er()}catch(e){n.Am.error("Erro ao atualizar demanda"),console.error("Error updating feature:",e)}},ec=async e=>{if(h)try{let{error:s}=await t.from("features").delete().eq("id",e);if(s)throw s;n.Am.success("Demanda exclu\xedda com sucesso!"),Z(null),er()}catch(e){n.Am.error("Erro ao excluir demanda"),console.error("Error deleting feature:",e)}},ed=async e=>{if(!h){z(!0);return}if(0===$.weeklyVotesLeft){n.Am.error("Voc\xea atingiu o limite de votos desta semana");return}let{error:s}=await t.from("votes").insert([{feature_id:e,user_id:h.user.id}]);s?"23505"===s.code?n.Am.error("Voc\xea j\xe1 votou nesta demanda"):s.message.includes("new row violates row-level security")?n.Am.error("Voc\xea atingiu o limite de votos desta semana"):n.Am.error("Falha ao registrar voto"):(n.Am.success("Voto registrado com sucesso"),er(),ei())},em=e=>{var s;return(null===(s=e.user_metadata)||void 0===s?void 0:s.first_name)?"".concat(e.user_metadata.first_name," ").concat(e.user_metadata.last_name||"").trim():"Usu\xe1rio"},ex=e=>{let{feature:s}=e;return(0,i.jsxs)(c.E.div,{className:"group relative",whileHover:{scale:1.1},whileTap:{scale:.9},children:[(0,i.jsxs)(c.E.button,{onClick:e=>{e.stopPropagation(),ed(s.id)},className:"flex flex-col items-center gap-1",disabled:0===$.weeklyVotesLeft,children:[(0,i.jsx)(b.Z,{size:24,className:h&&$.weeklyVotesLeft>0?"text-blue-600":"text-gray-400"}),(0,i.jsx)("span",{className:"text-lg font-semibold",children:s.votes_count})]}),s.voters&&s.voters.length>0&&(0,i.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 invisible group-hover:visible z-10",children:[(0,i.jsxs)("div",{className:"bg-gray-900 text-white text-sm rounded-lg py-2 px-3 whitespace-nowrap",children:[(0,i.jsx)("div",{className:"font-semibold mb-1",children:"Votos:"}),s.voters.map((e,s)=>(0,i.jsx)("div",{children:em(e)},s))]}),(0,i.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-8 border-transparent border-t-gray-900"})]}),h&&0===$.weeklyVotesLeft&&(0,i.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 invisible group-hover:visible z-10",children:[(0,i.jsx)("div",{className:"bg-gray-900 text-white text-sm rounded-lg py-2 px-3 whitespace-nowrap",children:"Voc\xea atingiu o limite de votos desta semana"}),(0,i.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-8 border-transparent border-t-gray-900"})]})]})};return(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v&&(0,i.jsx)("div",{className:"mb-8",children:(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:v.name})}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,i.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 mb-2",children:[(0,i.jsx)(x.Z,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"Total de Demandas"})]}),(0,i.jsx)("span",{className:"text-2xl font-bold",children:$.total})]}),(0,i.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-yellow-600 mb-2",children:[(0,i.jsx)(u.Z,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"Em Progresso"})]}),(0,i.jsx)("span",{className:"text-2xl font-bold text-yellow-600",children:$.inProgress})]}),(0,i.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-green-600 mb-2",children:[(0,i.jsx)(p.Z,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"Conclu\xeddas"})]}),(0,i.jsx)("span",{className:"text-2xl font-bold text-green-600",children:$.completed})]}),(0,i.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-blue-600 mb-2",children:[(0,i.jsx)(b.Z,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"Votos Restantes"})]}),(0,i.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:$.weeklyVotesLeft})]})]})}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,i.jsxs)("div",{className:"flex flex-wrap gap-4 justify-between items-center mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsxs)("select",{value:J,onChange:e=>Y(e.target.value),className:"rounded-md border-gray-300 shadow-sm px-3 py-1.5 text-sm",children:[(0,i.jsx)("option",{value:"votes",children:"Mais Votados"}),(0,i.jsx)("option",{value:"recent",children:"Mais Recentes"})]}),(0,i.jsxs)("select",{value:X,onChange:e=>K(e.target.value),className:"rounded-md border-gray-300 shadow-sm px-3 py-1.5 text-sm",children:[(0,i.jsx)("option",{value:"all",children:"Todos os Status"}),Object.entries(L).map(e=>{let[s,a]=e;return(0,i.jsx)("option",{value:s,children:a},s)})]}),(0,i.jsxs)("div",{className:"flex border rounded-md",children:[(0,i.jsx)("button",{onClick:()=>Q("grid"),className:"p-2 ".concat("grid"===B?"bg-gray-100":""),children:(0,i.jsx)(A.Z,{className:"w-5 h-5"})}),(0,i.jsx)("button",{onClick:()=>Q("list"),className:"p-2 ".concat("list"===B?"bg-gray-100":""),children:(0,i.jsx)(P.Z,{className:"w-5 h-5"})}),(0,i.jsx)("button",{onClick:()=>Q("kanban"),className:"p-2 ".concat("kanban"===B?"bg-gray-100":""),children:(0,i.jsx)(F.Z,{className:"w-5 h-5"})})]})]}),(0,i.jsxs)("button",{onClick:()=>h?k(!0):z(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[(0,i.jsx)(D.Z,{className:"w-5 h-5 mr-2"}),"Nova Feature"]})]}),"kanban"===B?(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:Object.keys(L).map(e=>(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[r.createElement(R[e],{size:20}),(0,i.jsx)("h3",{className:"font-semibold",children:L[e]}),(0,i.jsx)("span",{className:"ml-auto bg-gray-200 px-2 py-0.5 rounded-full text-sm",children:f.filter(s=>s.status===e).length})]}),(0,i.jsx)("div",{className:"space-y-4",children:f.filter(s=>s.status===e).map(e=>(0,i.jsxs)(c.E.div,{layout:!0,onClick:()=>Z(e),className:"bg-white rounded-lg border p-4 cursor-pointer hover:shadow-md transition-shadow",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,i.jsx)("h4",{className:"font-medium",children:e.title}),(0,i.jsx)(ex,{feature:e})]}),(0,i.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 mb-2",children:e.description}),(0,i.jsx)(w,{raci:e.raci})]},e.id))})]},e))}):(0,i.jsx)("div",{className:"grid"===B?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:f.map(e=>(0,i.jsxs)(c.E.div,{layout:!0,onClick:()=>Z(e),className:"bg-white rounded-lg border p-4 hover:shadow-md transition-shadow cursor-pointer",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,i.jsxs)("div",{children:[e.creator&&(0,i.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-500 mb-1",children:[(0,i.jsx)(g.Z,{className:"w-4 h-4"}),(0,i.jsxs)("span",{children:[e.creator.first_name," ",e.creator.last_name]})]}),(0,i.jsx)("h3",{className:"text-lg font-semibold",children:e.title})]}),(0,i.jsx)(ex,{feature:e})]}),(0,i.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-3",children:e.description}),(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-4",children:[(0,i.jsx)("span",{className:"px-3 py-1 rounded-full text-sm ".concat(U[e.status]),children:L[e.status]}),e.deadline&&(0,i.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,i.jsx)(j.Z,{className:"w-4 h-4 mr-1"}),new Date(e.deadline).toLocaleDateString()]})]}),(0,i.jsx)(w,{raci:e.raci})]},e.id))})]})]}),(0,i.jsxs)(C.M,{children:[E&&(0,i.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50",children:(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:(0,i.jsx)(O,{onAuthSuccess:()=>{z(!1),er()}})})})}),_&&(0,i.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 overflow-y-auto",children:(0,i.jsx)("div",{className:"min-h-screen px-4 text-center",children:(0,i.jsx)("div",{className:"inline-block align-middle my-8 w-full max-w-2xl",children:(0,i.jsxs)(c.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-lg shadow-xl w-full max-h-[80vh] flex flex-col",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold",children:"Nova Feature"}),(0,i.jsx)("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-500",children:(0,i.jsx)(V.Z,{className:"w-5 h-5"})})]}),(0,i.jsx)("div",{className:"overflow-y-auto flex-1 p-6",children:(0,i.jsxs)("form",{onSubmit:en,className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xedtulo"}),(0,i.jsx)("input",{type:"text",id:"title",value:es.title,onChange:e=>ea({...es,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Descri\xe7\xe3o"}),(0,i.jsx)("textarea",{id:"description",value:es.description,onChange:e=>ea({...es,description:e.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"deadline",className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Prevista"}),(0,i.jsx)("input",{type:"datetime-local",id:"deadline",value:es.deadline,onChange:e=>ea({...es,deadline:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Matriz RACI"}),(0,i.jsx)(M,{value:es.raci,onChange:e=>ea({...es,raci:e})})]})]})}),(0,i.jsxs)("div",{className:"border-t p-6 flex justify-end gap-3",children:[(0,i.jsx)("button",{type:"button",onClick:()=>k(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancelar"}),(0,i.jsx)("button",{onClick:en,className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700",children:"Criar Feature"})]})]})})})}),S&&(0,i.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 overflow-y-auto",children:(0,i.jsx)("div",{className:"min-h-screen px-4 text-center",children:(0,i.jsx)("div",{className:"inline-block align-middle my-8 w-full max-w-2xl",children:(0,i.jsxs)(c.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-lg shadow-xl w-full max-h-[80vh] flex flex-col",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold",children:q?"Editar Feature":"Detalhes da Feature"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(null==h?void 0:null===(s=h.user)||void 0===s?void 0:s.id)===S.created_by&&!q&&(0,i.jsx)("button",{onClick:()=>H(!0),className:"p-2 text-gray-400 hover:text-gray-500",children:(0,i.jsx)(I.Z,{className:"w-5 h-5"})}),(0,i.jsx)("button",{onClick:()=>{Z(null),H(!1)},className:"p-2 text-gray-400 hover:text-gray-500",children:(0,i.jsx)(V.Z,{className:"w-5 h-5"})})]})]}),(0,i.jsx)("div",{className:"overflow-y-auto flex-1 p-6",children:q?(0,i.jsxs)("form",{onSubmit:eo,className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"edit-title",className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xedtulo"}),(0,i.jsx)("input",{type:"text",id:"edit-title",value:W.title,onChange:e=>G({...W,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"edit-description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Descri\xe7\xe3o"}),(0,i.jsx)("textarea",{id:"edit-description",value:W.description,onChange:e=>G({...W,description:e.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]}),et&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"edit-status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,i.jsx)("select",{id:"edit-status",value:W.status,onChange:e=>G({...W,status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:Object.entries(L).map(e=>{let[s,a]=e;return(0,i.jsx)("option",{value:s,children:a},s)})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"edit-deadline",className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Prevista"}),(0,i.jsx)("input",{type:"datetime-local",id:"edit-deadline",value:W.deadline,onChange:e=>G({...W,deadline:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Matriz RACI"}),(0,i.jsx)(M,{value:W.raci,onChange:e=>G({...W,raci:e})})]})]}):(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:S.title}),(0,i.jsx)("p",{className:"text-gray-600 whitespace-pre-wrap",children:S.description})]}),(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,i.jsx)("span",{className:"px-3 py-1 rounded-full text-sm ".concat(U[S.status]),children:L[S.status]}),S.deadline&&(0,i.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,i.jsx)(j.Z,{className:"w-4 h-4 mr-1"}),new Date(S.deadline).toLocaleDateString()]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Responsabilidades"}),(0,i.jsx)(M,{value:S.raci||[],onChange:()=>{}})]}),S.voters&&S.voters.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsxs)("h4",{className:"font-medium text-gray-900 mb-2",children:["Votos (",S.votes_count,")"]}),(0,i.jsx)("div",{className:"space-y-1",children:S.voters.map((e,s)=>(0,i.jsx)("div",{className:"text-sm text-gray-600",children:em(e)},s))})]})]})}),(0,i.jsxs)("div",{className:"border-t p-6 flex justify-between",children:[(0,i.jsx)("div",{children:(null==h?void 0:null===(a=h.user)||void 0===a?void 0:a.id)===S.created_by&&"not_prioritized"===S.status&&(0,i.jsxs)("button",{onClick:()=>ec(S.id),className:"flex items-center px-4 py-2 text-red-600 hover:text-red-700",children:[(0,i.jsx)(T.Z,{className:"w-4 h-4 mr-2"}),"Excluir"]})}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{type:"button",onClick:()=>{Z(null),H(!1)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:q?"Cancelar":"Fechar"}),q&&(0,i.jsx)("button",{onClick:eo,className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700",children:"Salvar Altera\xe7\xf5es"})]})]})]})})})})]})]})}var G=a(3696);function J(){let e=(0,o.useSession)(),s=(0,l.s0)(),[a,d]=(0,r.useState)(!1),[m,x]=(0,r.useState)({first_name:"",last_name:""}),u=(0,r.useCallback)(async()=>{let{data:{user:e}}=await t.auth.getUser();(null==e?void 0:e.user_metadata)&&x({first_name:e.user_metadata.first_name||"",last_name:e.user_metadata.last_name||""})},[]);(0,r.useEffect)(()=>{if(!e){s("/");return}u()},[e,s,u]);let p=async e=>{e.preventDefault(),d(!0);try{let{error:e}=await t.auth.updateUser({data:{first_name:m.first_name,last_name:m.last_name}});if(e)throw e;n.Am.success("Perfil atualizado com sucesso!")}catch(s){let e=s instanceof Error?s.message:"Erro ao atualizar perfil";n.Am.error(e)}finally{d(!1)}};return(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsx)("div",{className:"max-w-md mx-auto",children:(0,i.jsx)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-lg overflow-hidden",children:(0,i.jsxs)("div",{className:"px-6 py-8",children:[(0,i.jsx)("div",{className:"flex items-center justify-center mb-8",children:(0,i.jsx)(g.Z,{className:"h-12 w-12 text-blue-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Meu Perfil"}),(0,i.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-700",children:"Nome"}),(0,i.jsx)("input",{type:"text",id:"first_name",required:!0,value:m.first_name,onChange:e=>x({...m,first_name:e.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700",children:"Sobrenome"}),(0,i.jsx)("input",{type:"text",id:"last_name",required:!0,value:m.last_name,onChange:e=>x({...m,last_name:e.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,i.jsxs)(c.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:a,className:"w-full flex items-center justify-center gap-2 px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,i.jsx)(G.Z,{size:18}),a?"Salvando...":"Salvar Altera\xe7\xf5es"]})]})]})})})})})}var Y=a(9689);function B(){return(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white py-12",children:(0,i.jsxs)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,i.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[(0,i.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Como Funciona"}),(0,i.jsx)("p",{className:"text-xl text-gray-600",children:"Entenda como funciona nosso sistema de vota\xe7\xe3o de demandas"})]}),(0,i.jsxs)("div",{className:"space-y-8",children:[(0,i.jsxs)(c.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"bg-white rounded-lg shadow-lg p-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,i.jsx)(Y.Z,{className:"h-6 w-6 text-blue-600"}),(0,i.jsx)("h2",{className:"text-xl font-semibold",children:"Sistema de Vota\xe7\xe3o"})]}),(0,i.jsxs)("div",{className:"space-y-3 text-gray-600",children:[(0,i.jsx)("p",{children:"• Cada usu\xe1rio tem direito a 3 votos por semana em cada projeto"}),(0,i.jsx)("p",{children:"• Os votos s\xe3o renovados automaticamente toda semana"}),(0,i.jsx)("p",{children:"• Votos n\xe3o utilizados n\xe3o acumulam para a pr\xf3xima semana"}),(0,i.jsx)("p",{children:"• Voc\xea pode ver seus votos restantes no painel do projeto"})]})]}),(0,i.jsxs)(c.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"bg-white rounded-lg shadow-lg p-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,i.jsx)(x.Z,{className:"h-6 w-6 text-blue-600"}),(0,i.jsx)("h2",{className:"text-xl font-semibold",children:"Status das Demandas"})]}),(0,i.jsxs)("div",{className:"space-y-3 text-gray-600",children:[(0,i.jsx)("p",{children:"• N\xe3o Priorizado: Demanda registrada mas ainda n\xe3o avaliada"}),(0,i.jsx)("p",{children:"• Priorizado: Demanda aprovada e aguardando in\xedcio"}),(0,i.jsx)("p",{children:"• Em Progresso: Demanda em desenvolvimento"}),(0,i.jsx)("p",{children:"• Conclu\xeddo: Desenvolvimento finalizado"}),(0,i.jsx)("p",{children:"• Em Produ\xe7\xe3o: Demanda j\xe1 dispon\xedvel em produ\xe7\xe3o"})]})]}),(0,i.jsxs)(c.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"bg-white rounded-lg shadow-lg p-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,i.jsx)(u.Z,{className:"h-6 w-6 text-blue-600"}),(0,i.jsx)("h2",{className:"text-xl font-semibold",children:"Ciclo de Vida"})]}),(0,i.jsxs)("div",{className:"space-y-3 text-gray-600",children:[(0,i.jsx)("p",{children:"1. Usu\xe1rios registram novas demandas nos projetos"}),(0,i.jsx)("p",{children:"2. A comunidade vota nas demandas mais importantes"}),(0,i.jsx)("p",{children:"3. Demandas mais votadas s\xe3o priorizadas para desenvolvimento"}),(0,i.jsx)("p",{children:"4. O status \xe9 atualizado conforme o progresso"}),(0,i.jsx)("p",{children:"5. Todos podem acompanhar o andamento em tempo real"})]})]})]})]})})}var Q=a(5977);function X(){let[e,s]=(0,r.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 via-white to-blue-50",children:[(0,i.jsx)("div",{className:"relative overflow-hidden",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,i.jsx)("div",{className:"relative z-10 pb-8 sm:pb-16 md:pb-20 lg:w-full lg:pb-28 xl:pb-32",children:(0,i.jsx)("main",{className:"mt-10 mx-auto max-w-7xl px-4 sm:mt-12 sm:px-6 lg:mt-16 lg:px-8 xl:mt-28",children:(0,i.jsxs)("div",{className:"text-center lg:text-left",children:[(0,i.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,i.jsxs)("h1",{className:"text-4xl tracking-tight font-extrabold text-gray-900 sm:text-5xl md:text-6xl",children:[(0,i.jsx)("span",{className:"block",children:"Sistema de Vota\xe7\xe3o"}),(0,i.jsx)("span",{className:"block text-blue-600",children:"de Demandas"})]}),(0,i.jsx)("p",{className:"mt-3 text-base text-gray-500 sm:mt-5 sm:text-lg sm:max-w-xl sm:mx-auto lg:mx-0 md:mt-5 md:text-xl",children:"Participe ativamente do processo de prioriza\xe7\xe3o de demandas. Vote nas funcionalidades mais importantes e acompanhe o progresso dos projetos."})]}),(0,i.jsx)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},className:"mt-5 sm:mt-8 sm:flex sm:justify-center lg:justify-start",children:(0,i.jsx)("div",{className:"rounded-md shadow",children:(0,i.jsxs)("button",{onClick:()=>s(!0),className:"w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 md:py-4 md:text-lg md:px-10",children:["Come\xe7ar",(0,i.jsx)(m.Z,{className:"ml-2 h-5 w-5"})]})})})]})})})})}),(0,i.jsx)("div",{className:"py-12 bg-white",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,i.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},className:"text-center mb-16",children:[(0,i.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900 sm:text-4xl",children:"Como Funciona"}),(0,i.jsx)("p",{className:"mt-4 text-xl text-gray-500",children:"Um processo simples e transparente para priorizar demandas"})]}),(0,i.jsx)("div",{className:"mt-10",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-10 sm:grid-cols-2 lg:grid-cols-3",children:[(0,i.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},className:"flex flex-col items-center text-center",children:[(0,i.jsx)("div",{className:"flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 text-blue-600 mb-4",children:(0,i.jsx)(Y.Z,{className:"h-8 w-8"})}),(0,i.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Vote nas Demandas"}),(0,i.jsx)("p",{className:"text-gray-500",children:"Cada usu\xe1rio tem 3 votos por semana para distribuir entre as demandas que considerar mais importantes."})]}),(0,i.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7,duration:.5},className:"flex flex-col items-center text-center",children:[(0,i.jsx)("div",{className:"flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 text-blue-600 mb-4",children:(0,i.jsx)(N.Z,{className:"h-8 w-8"})}),(0,i.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Colabora\xe7\xe3o em Equipe"}),(0,i.jsx)("p",{className:"text-gray-500",children:"Acompanhe as responsabilidades de cada time atrav\xe9s da matriz RACI e mantenha todos alinhados."})]}),(0,i.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},className:"flex flex-col items-center text-center",children:[(0,i.jsx)("div",{className:"flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 text-blue-600 mb-4",children:(0,i.jsx)(p.Z,{className:"h-8 w-8"})}),(0,i.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Acompanhe o Progresso"}),(0,i.jsx)("p",{className:"text-gray-500",children:"Visualize o status de cada demanda, desde sua cria\xe7\xe3o at\xe9 a implementa\xe7\xe3o em produ\xe7\xe3o."})]})]})})]})}),(0,i.jsx)("div",{className:"bg-blue-600",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:py-16 lg:px-8 lg:flex lg:items-center lg:justify-between",children:[(0,i.jsx)(c.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:1,duration:.5},children:(0,i.jsxs)("h2",{className:"text-3xl font-extrabold tracking-tight text-white sm:text-4xl",children:[(0,i.jsx)("span",{className:"block",children:"Pronto para come\xe7ar?"}),(0,i.jsx)("span",{className:"block text-blue-200",children:"Fa\xe7a login e participe do processo."})]})}),(0,i.jsx)(c.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:1.2,duration:.5},className:"mt-8 flex lg:mt-0 lg:flex-shrink-0",children:(0,i.jsx)("div",{className:"inline-flex rounded-md shadow",children:(0,i.jsxs)("button",{onClick:()=>s(!0),className:"inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-blue-600 bg-white hover:bg-blue-50",children:[(0,i.jsx)(Q.Z,{className:"h-5 w-5 mr-2"}),"Acessar Sistema"]})})})]})})]}),(0,i.jsx)(C.M,{children:e&&(0,i.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:(0,i.jsx)(c.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-lg shadow-xl max-w-md w-full m-4",children:(0,i.jsx)(O,{onAuthSuccess:()=>{s(!1),window.location.href="/"}})})})})]})}var K=a(1173),$=a(8051),ee=a(7232);function es(){let e=(0,l.s0)(),{projectId:s}=(0,l.UO)(),[a,t]=(0,r.useState)(null),[n,d]=(0,r.useState)(!1),[m,x]=(0,r.useState)(!1),u=(0,o.useSession)(),p=(0,o.useSupabaseClient)(),b=(0,r.useCallback)(async()=>{if(!s)return;let{data:e}=await p.from("projects").select("*").eq("id",s).single();e&&t(e)},[s,p]);(0,r.useEffect)(()=>{u&&s&&b()},[s,u,b]);let j=async()=>{await p.auth.signOut(),e("/")};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("header",{className:"bg-gradient-to-b from-blue-50 to-white border-b border-gray-200 sticky top-0 z-40",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between h-14 sm:h-16",children:[(0,i.jsxs)(c.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>e("/"),className:"flex items-center gap-2 text-gray-900 hover:text-blue-600 transition-colors",children:[(0,i.jsx)(h.Z,{className:"h-5 sm:h-6 w-5 sm:w-6"}),(0,i.jsx)("span",{className:"text-base sm:text-lg font-semibold truncate max-w-[150px] sm:max-w-[200px]",children:a?a.name:"ECBR Prioriza\xe7\xe3o"})]}),(0,i.jsxs)("div",{className:"hidden md:flex items-center gap-4",children:[(0,i.jsxs)(c.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>e("/how-it-works"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[(0,i.jsx)(K.Z,{size:16}),(0,i.jsx)("span",{children:"Como Funciona"})]}),u?(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)(c.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>e("/profile"),className:"flex items-center gap-2 text-gray-700 hover:text-gray-900 transition-colors text-sm",children:[(0,i.jsx)(g.Z,{size:16}),(0,i.jsx)("span",{className:"hidden lg:inline",children:u.user.email})]}),(0,i.jsxs)(c.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:j,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-gray-700 hover:text-gray-900 transition-colors",children:[(0,i.jsx)($.Z,{size:16}),(0,i.jsx)("span",{children:"Sair"})]})]}):(0,i.jsxs)(c.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>d(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 transition-colors",children:[(0,i.jsx)(H.Z,{size:16}),"Entrar"]})]}),(0,i.jsx)("button",{onClick:()=>x(!m),className:"md:hidden p-2 text-gray-600 hover:text-gray-900 transition-colors",children:m?(0,i.jsx)(V.Z,{size:20}):(0,i.jsx)(ee.Z,{size:20})})]}),(0,i.jsx)(C.M,{children:m&&(0,i.jsxs)(c.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden py-4 space-y-4",children:[(0,i.jsxs)(c.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{e("/how-it-works"),x(!1)},className:"flex items-center gap-2 w-full px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[(0,i.jsx)(K.Z,{size:16}),(0,i.jsx)("span",{children:"Como Funciona"})]}),u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{e("/profile"),x(!1)},className:"flex items-center gap-2 w-full px-4 py-2 text-gray-700 hover:text-gray-900 transition-colors text-sm",children:[(0,i.jsx)(g.Z,{size:16}),(0,i.jsx)("span",{children:u.user.email})]}),(0,i.jsxs)(c.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{j(),x(!1)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 transition-colors",children:[(0,i.jsx)($.Z,{size:16}),"Sair"]})]}):(0,i.jsxs)(c.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{d(!0),x(!1)},className:"flex items-center gap-2 w-full px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 transition-colors",children:[(0,i.jsx)(H.Z,{size:16}),"Entrar"]})]})})]})}),(0,i.jsx)(C.M,{children:n&&(0,i.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50",children:(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:(0,i.jsx)(O,{onAuthSuccess:()=>{d(!1)}})})})})})]})}function ea(e){let{onComplete:s}=e,[a,l]=(0,r.useState)(""),[o,d]=(0,r.useState)(""),[m,x]=(0,r.useState)(!1),u=async e=>{e.preventDefault(),x(!0);try{let e=await t.auth.updateUser({data:{first_name:a,last_name:o}});if(e.error)throw e.error;n.Am.success("Perfil atualizado com sucesso!"),s()}catch(e){n.Am.error("Erro ao atualizar perfil")}finally{x(!1)}};return(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,i.jsx)(c.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsx)("div",{className:"flex justify-center mb-6",children:(0,i.jsx)(g.Z,{className:"h-12 w-12 text-blue-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-6",children:"Bem-vindo! Como podemos te chamar?"}),(0,i.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),(0,i.jsx)("input",{type:"text",id:"firstName",value:a,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Sobrenome"}),(0,i.jsx)("input",{type:"text",id:"lastName",value:o,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,i.jsx)(c.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:m,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:m?"Salvando...":"Continuar"})]})]})})})}function et(e){let{children:s}=e;return(0,o.useSession)()?(0,i.jsx)(i.Fragment,{children:s}):(0,i.jsx)(l.Fg,{to:"/",replace:!0})}var ei=function(){let e=(0,o.useSession)(),s=(0,o.useSupabaseClient)(),[a,t]=(0,r.useState)(!1),c=(0,r.useCallback)(async()=>{var a;if(!e)return;let{data:{user:i}}=await s.auth.getUser();(null==i?void 0:null===(a=i.user_metadata)||void 0===a?void 0:a.first_name)||t(!0)},[e,s]);return(0,r.useEffect)(()=>{e&&c()},[e,c]),(0,i.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,i.jsx)(n.x7,{position:"top-right"}),e&&(0,i.jsx)(es,{}),a&&(0,i.jsx)(ea,{onComplete:()=>t(!1)}),(0,i.jsx)("main",{className:"flex-1",children:(0,i.jsxs)(l.Z5,{children:[(0,i.jsx)(l.AW,{path:"/",element:e?(0,i.jsx)(et,{children:(0,i.jsx)(E,{})}):(0,i.jsx)(X,{})}),(0,i.jsx)(l.AW,{path:"/project/:projectId",element:(0,i.jsx)(et,{children:(0,i.jsx)(W,{})})}),(0,i.jsx)(l.AW,{path:"/profile",element:(0,i.jsx)(et,{children:(0,i.jsx)(J,{})})}),(0,i.jsx)(l.AW,{path:"/how-it-works",element:(0,i.jsx)(et,{children:(0,i.jsx)(B,{})})}),(0,i.jsx)(l.AW,{path:"*",element:(0,i.jsx)(l.Fg,{to:"/",replace:!0})})]})})]})};function el(){return(0,i.jsx)(l.VK,{children:(0,i.jsx)(ei,{})})}}}]);